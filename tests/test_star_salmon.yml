# NOTE For now these tests don't support any containers beside docker
- name: Test STAR Salmon with skip_qc workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --skip_qc
  tags:
    - star
    - salmon
    - skip_qc

- name: Test STAR Salmon with remove_ribo_rna workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --remove_ribo_rna
  tags:
    - star
    - salmon
    - remove_ribo_rna
    - failing
  exit_code: 1

- name: Test STAR Salmon with skim_trimming workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --skim_trimming
  tags:
    - star
    - salmon
    - skim_trimming

- name: Test STAR Salmon with gtf false workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --gtf false
  tags:
    - star
    - salmon
    - 'gtf false'

- name: Test STAR Salmon with star_index false workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --star_index false
  tags:
    - star
    - salmon
    - 'star_index false'

- name: Test STAR Salmon with transcript_fasta false workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --transcript_fasta false
  tags:
    - star
    - salmon
    - 'transcript_fasta'

- name: Test STAR Salmon with min_mapped_reads 90 workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --min_mapped_reads 90
  tags:
    - star
    - salmon
    - 'min_mapped_reads 90'

- name: Test STAR Salmon with with_umi workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --with_umi
  tags:
    - star
    - salmon
    - with_umi

- name: Test STAR Salmon with with_umi skip_trimming workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --with_umi --skip_trimming
  tags:
    - star
    - salmon
    - with_umi
    - skip_trimming

- name: Test STAR Salmon with bam_csi_index workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --bam_csi_index
  tags:
    - star
    - salmon
    - "bam_csi_index"

- name: Test STAR Salmon with save_align_intermeds save_reference workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --save_align_intermeds --save_reference
  tags:
    - star
    - salmon
    - "save_reference"

- name: Test STAR Salmon with featurecounts_group_type false workflow parameters
  command: nextflow run main.nf -profile test,docker --aligner star_salmon --featurecounts_group_type false
  tags:
    - star
    - salmon
    - "featurecounts_group_type"
